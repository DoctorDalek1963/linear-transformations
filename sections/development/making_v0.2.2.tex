% lintrans - The linear transformation visualizer
% Copyright (C) 2021-2022 D. Dyson (DoctorDalek1963)

% This program is licensed under GNU GPLv3, available here:
% <https://www.gnu.org/licenses/gpl-3.0.html>

\documentclass[../development.tex]{subfiles}

\begin{document}

\subsubsection{Hiding the background and transformed grids\label{development:making-v0.2.2:hiding-the-background-and-transformed-grids}}

I spoke to my main stakeholder, who is the teacher that will be using \texttt{lintrans} when it's finished, and she said that the background grid and transformed grid can get a little bit in the way of the core action and make it harder to understand what's happening. Taking this feedback on board, I decided to add a display setting to toggle the background grid, and one to toggle the transformed grid.

I did the background grid first and then repeated everything for the transformed version of the grid as well. I am combining them here for brevity. The first step was of course to add a display setting for each of them. Then I had to add checkboxes for them in the display settings dialog, and then incorporate the settings into the actual drawing of the canvas.

%: d045057d568ac133b621ee9ca9daed361d570d7a
%: src/lintrans/gui/settings.py:14-27

%: d045057d568ac133b621ee9ca9daed361d570d7a
%: src/lintrans/gui/dialogs/settings.py:70,73,89-101,204,207-208,221,224-225 noscopes

%: d045057d568ac133b621ee9ca9daed361d570d7a
%: src/lintrans/gui/plots/widgets.py:60-63

%: d045057d568ac133b621ee9ca9daed361d570d7a
%: src/lintrans/gui/plots/classes.py:129-154

Then I added this change to the changelog.

%: d045057d568ac133b621ee9ca9daed361d570d7a
%: CHANGELOG.md:12-14 markdown!

\subsubsection{Hiding the basis vectors\label{development:making-v0.2.2:hiding-the-basis-vectors}}

While I was implementing new display settings, I decided to implement hiding basis vectors. This will give users the option of just seeing the grid get transformed. The process was exactly the same as before. Add the setting, add it to the dialog, use it when drawing.

%: 11ffbaf71f9fe29e1832a62f2b127aa3939e520d
%: src/lintrans/gui/settings.py:29-30

%: 11ffbaf71f9fe29e1832a62f2b127aa3939e520d
%: src/lintrans/gui/dialogs/settings.py:70,73,103-108,212,217,230,235 noscopes

%: 11ffbaf71f9fe29e1832a62f2b127aa3939e520d
%: src/lintrans/gui/plots/widgets.py:65-66

And then of course add it to the changelog.

%: 11ffbaf71f9fe29e1832a62f2b127aa3939e520d
%: CHANGELOG.md:12-14 markdown!

\subsubsection{Improving argument parsing\label{development:making-v0.2.2:improving-argument-parsing}}

Qt5 accepts arguments to its main method. I don't really know what these arguments can do, but it would be nice to be able to use them. I also want to be able to save sessions as files in the future, and it would be quite useful to open a session file by passing it as a command line argument. To make both of these easier, I decided to refactor my argument parsing.

Python has a built-in library called \pyinline{argparse}, which allows for more sophisticated argument parsing. One of the things \pyinline{argparse} can do is parse only some of the command line arguments with a method called \pyinline{parse_known_args()}\cite{argparse-parse-known-args}. I can then pass the unconsumed arguments on to Qt5. \texttt{\_\_main.py\_\_} now looks like this:

%: a688a14839caba2ee14f8551764b771ae803d935
%: src/lintrans/__main__.py

The \enquote{\pyinline{args[:1] + unparsed_args}} on line 71 means that we pass the name of the program first, and the rest of the unconsumed arguments after it.

And of course, I added it to the changelog, this time as a fix rather than an addition:

%: a688a14839caba2ee14f8551764b771ae803d935
%: CHANGELOG.md:16-18 markdown!

\subsubsection{Respecting display settings in the visual definition dialog\label{development:making-v0.2.2:respecting-display-settings-in-the-visual-definition-dialog}}

\texttt{DefineVisuallyWidget} is a subclass of \texttt{VisualizeTransformationWidget}. If it had its own instance attribute of type \pyinline{DisplaySettings}, then it could use its superclass's \pyinline{paintEvent()} method, and that would respect the display settings in the visual definition dialog.

%: 5850aa916b685992f31e58680267916927ed590d
%: src/lintrans/gui/plots/widgets.py:91-93

%: 5850aa916b685992f31e58680267916927ed590d
%: src/lintrans/gui/dialogs/define_new_matrix.py:169-180

Since the \texttt{DefineVisuallyDialog} now accepts display settings but the other definition dialogs don't, we need change the \pyinline{LintransMainWindow.dialog_define_matrix()} method to treat the visual definition dialog differently.

%: 5850aa916b685992f31e58680267916927ed590d
%: src/lintrans/gui/main_window.py:447-476

And, of course, I updated the changelog:

%: 5850aa916b685992f31e58680267916927ed590d
%: CHANGELOG.md:12,15 markdown!

\end{document}
